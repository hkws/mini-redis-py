# 実装計画

## 概要

学習資料の拡充機能の実装タスクです。ワークショップ段階別講義資料、アーキテクチャ解説資料、既存ガイドの強化を順次実施します。

## タスク一覧

- [ ] 1. 導入段階の講義資料を作成する
- [ ] 1.1 Redisの基本概念とMini-Redisの概要を説明する資料を作成
  - Redisとは何か、キー・バリューストアの基本概念を説明
  - Mini-Redisプロジェクトの目的と学習目標を明示
  - 完成版を使ったデモ手順（PING/GET/SET/INCR/EXPIRE）を記載
  - 期待される動作の確認方法を説明
  - _Requirements: 1.1_

- [ ] 1.2 RESPプロトコルの基本構造を解説する資料を作成
  - RESPプロトコルの概要と目的を説明
  - Arrays形式とBulk Stringsの構造を図解付きで説明
  - CRLF終端とバイナリセーフの概念を明示
  - Simple Strings/Integers/Errorsのフォーマットを説明
  - クライアント・サーバ間のメッセージフロー図を追加
  - Redis公式サイトとRESP仕様へのリンクを含める
  - _Requirements: 1.1_

- [ ] 2. TCPサーバとプロトコル実装の講義資料を作成する
- [ ] 2.1 asyncioによるTCPサーバ構築を解説する資料を作成
  - asyncioの基礎（イベントループ、コルーチン、async/await）を説明
  - TCPサーバパターン（asyncio.start_server()）を解説
  - StreamReader/StreamWriterの使用方法を説明
  - 接続管理とクリーンアップのベストプラクティスを記載
  - エラーハンドリングとgraceful shutdownのパターンを説明
  - イベントループの動作図とクライアント接続フロー図を追加
  - Python asyncio公式ドキュメントへのリンクを含める
  - _Requirements: 1.2_

- [ ] 2.2 RESPプロトコルのパース・エンコード実装を解説する資料を作成
  - RESPデータ型の詳細（Simple Strings/Integers/Bulk Strings/Arrays/Errors）を説明
  - パースアルゴリズムのステップバイステップ解説を記載
  - エンコード実装のパターン（文字列→Bulk String等）を説明
  - よくある落とし穴（CRLF削除忘れ、バイト長vs文字数）を明示
  - パース処理のフローチャートと各データ型の構造図を追加
  - 実装例のコードスニペットを含める
  - _Requirements: 1.3_

- [ ] 3. コマンドと有効期限管理の講義資料を作成する
- [ ] 3.1 Redisコマンドの実装パターンを解説する資料を作成
  - コマンド実行層の役割（ルーティング、引数検証、ビジネスロジック）を説明
  - 各コマンドの仕様と実装方法（PING/GET/SET/INCR/EXPIRE/TTL）を記載
  - エラーハンドリングのパターンとエラーメッセージ形式を説明
  - Passive Expiryの統合方法を解説
  - redis-cliでの実行例と期待される結果を含める
  - コマンド実行フロー図とエラーハンドリングフローチャートを追加
  - _Requirements: 1.4, 1.7, 1.9_

- [ ] 3.2 有効期限管理メカニズムを解説する資料を作成
  - 有効期限管理の必要性とユースケースを説明
  - Passive Expiryの動作原理、利点、欠点を記載
  - Active Expiryの動作原理（ランダムサンプリング、削除率チェック）を説明
  - asyncioバックグラウンドタスクの実装パターンを解説
  - Active Expiryのパラメータ（間隔1秒、サンプル20、閾値25%）を明示
  - Passive/Active Expiryのタイムライン図とアルゴリズムのフローチャートを追加
  - 実装のポイント（無限ループ、削除率計算、タスクライフサイクル）を記載
  - _Requirements: 1.5_

- [ ] 4. まとめと発展課題の講義資料を作成する
- [ ] 4.1 ワークショップの振り返りと次のステップを提案する資料を作成
  - 実装した機能（RESPプロトコル、asyncio TCPサーバ、6つのコマンド、有効期限管理）を振り返り
  - 習得したスキル（非同期プログラミング、プロトコル実装、レイヤー分離、TDD）を確認
  - 発展課題（DEL/EXISTS/EXPIRETIME、複雑なデータ構造、永続化、Pub/Sub、トランザクション、メトリクス）を提案
  - 学習リソース（Redis公式、asyncio応用、書籍）へのリンクを含める
  - _Requirements: 1.6_

- [ ] 5. システムアーキテクチャの解説資料を作成する
- [ ] 5.1 システム全体像とレイヤー構造を説明する資料を作成
  - システム全体像の図（Redis Client → Network → Protocol → Command → Storage/Expiry）を作成
  - 各レイヤーの責務と役割を表形式で整理
  - レイヤー分離の原則と利点を説明
  - _Requirements: 3.1_

- [ ] 5.2 モジュール間の依存関係とデータフローを図解する資料を作成
  - モジュール依存関係のダイアグラム（上位層→下位層の一方向依存）を作成
  - 依存関係のルール（逆依存禁止、同一層内の相互依存最小化）を明示
  - クライアントリクエストから応答までのデータフローをシーケンス図で表現
  - 各処理ステップでの関数呼び出しとデータの流れを詳細に記載
  - _Requirements: 3.2, 3.3_

- [ ] 5.3 設計原則と発展課題の設計方針を説明する資料を作成
  - レイヤー分離、単一責任の原則、テスタビリティを具体例とともに説明
  - 明示的なエラーハンドリングのパターンを記載
  - データ永続化（RDB/AOF）を実装する場合の設計方針を提案
  - Pub/Sub機能を実装する場合の設計方針を提案
  - _Requirements: 3.4, 3.5_

- [ ] 6. 既存ガイドに学習資料へのリンクを追加する
- [ ] 6.1 README.mdに学習資料とアーキテクチャへのリンクを追加
  - 「学習資料」セクションを新設し、導入講義資料へのリンクを追加
  - プロジェクト構成セクションにアーキテクチャドキュメントへのリンクを追加
  - 既存の構造を維持し、侵襲性を最小限に抑える
  - _Requirements: 3.1_

- [ ] 6.2 WORKSHOP_GUIDE.mdに段階別講義資料へのリンクを追加
  - 各実装ステップの冒頭に対応する講義資料へのリンクを追加
  - ステップ1（RESPプロトコル）に02-protocol-parsing.mdへのリンク
  - ステップ2（TCPサーバ）に01-tcp-server.mdへのリンク
  - ステップ3（コマンド実装）に03-commands.mdへのリンク
  - ステップ4（EXPIRE実装）に04-expiry.mdへのリンク
  - アーキテクチャ参照リンクをガイド冒頭に追加
  - _Requirements: 2.5_

- [ ] 7. ドキュメント品質を検証する
- [ ] 7.1 コンテンツの技術的正確性とリンクの有効性を確認
  - RESPプロトコル仕様とasyncio APIの正確性を確認
  - すべての内部リンク・外部リンクの有効性を検証
  - Mermaidダイアグラムの構文と内容を確認
  - 用語の使用が統一されているか確認
  - _Requirements: 全要件の品質保証_

- [ ] 7.2 コード例の動作確認と実行例の検証
  - すべてのコード例が実際に動作することを確認
  - redis-cliの実行例が期待される結果を返すことを確認
  - コードスニペットがruffフォーマット準拠であることを確認
  - _Requirements: 1.8, 1.9_

- [ ] 7.3 学習フローの一貫性と完全性を確認
  - 各段階の学習目標が明確に定義されているか確認
  - 前提知識が適切に明示されているか確認
  - 講義資料→実装ガイドの学習フローがスムーズか確認
  - 既存ドキュメントとの矛盾がないか確認
  - すべての要件がタスクでカバーされているか最終確認
  - _Requirements: 1.8, 全要件のカバレッジ確認_

## 実装順序の推奨

1. タスク1（導入講義資料）から開始し、ワークショップの流れに沿って順次作成
2. タスク5（アーキテクチャ資料）は講義資料作成後に実施（全体像の理解が深まる）
3. タスク6（既存ガイドへのリンク追加）は新規資料作成完了後に実施
4. タスク7（品質検証）は最後に実施し、全体の一貫性を確認

## 注意事項

- すべての資料は日本語で記述する
- Mermaidダイアグラムを積極的に使用し、視覚的理解を促進する
- コード例は最小限に抑え、説明を詳細にする
- 各講義資料は独立して理解可能にする（モジュール性の維持）
- 既存ドキュメント（README.md、WORKSHOP_GUIDE.md）への変更は最小限に抑える
